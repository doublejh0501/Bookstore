# 화면설계도

# 도서 사이트 화면 설계도 (Thymeleaf)

---

## 0) 공통 원칙

- **템플릿 구조(예시)**
    - `templates/_fragments/` : `layout.html`, `header.html`, `footer.html`, `pagination.html`, `search-bar.html`, `table-empty.html`, `modals.html` 등
    - `templates/admin/` : 관리자용 화면
    - `templates/user/` : 회원/마이페이지/주문
    - `templates/product/` : 상품 카탈로그/상세
    - `templates/auth/` : 로그인/회원가입/비밀번호 재설정
    - `templates/error/` : 오류 페이지(404/500)
- **레이아웃**: `layout.html`(Thymeleaf Layout Dialect 또는 th:replace 기반 프래그먼트 합성)
- **페이징**: 공통 프래그먼트 `pagination.html`(pageSize: 30/50/100 셀렉트 + 번호 이동)
- **검색/정렬 바**: 각 목록화면 상단에 공통 프래그먼트 사용(입력/셀렉트/기간)
- **상태값 ENUM 예시**
    - 판매상태: `ON_SALE`, `OUT_OF_PRINT`, `TEMP_SOLD_OUT`, `COMING_SOON`
    - 주문상태: `PENDING`, `PAID`, `SHIPPED`, `CANCELLED`, `REFUNDED`
    - 회원상태: `ACTIVE`, `INACTIVE`, `DORMANT`, `WITHDRAWN`
- **날짜 검색**: `등록일/가입일` 등은 `from`~`to` 기간 입력(달력)

---

## 1) 관리자(Admin) 화면

### A-1. 상품 목록 조회 (+검색/정렬/페이징)

- **Route**: `GET /admin/products`
- **Template**: `admin/product-list.html`
- **Search**: 책이름, 출판사, 저자, 재고수량(범위), 판매상태, 등록일(기간)
- **Sort**: 이름, 가격, 등록일 (ASC/DESC)
- **Table Columns**: 썸네일, 이름, 저자, 출판사, 가격, 재고, 판매상태, 등록일, 관리(상세/수정)
- **Actions**: "상품 등록" 버튼(A-2로 이동)

### A-2. 상품 등록

- **Route**: `GET /admin/products/new`, `POST /admin/products`
- **Template**: `admin/product-form.html`
- **Fields**: ISBN, 출판사, 저자, **책 이미지 업로드**, **미리보기(PDF)** 업로드, 상세설명(Rich Text), 가격, 책 크기, 평점, 판매지수
- **Validation**: 필수값/형식/파일 확장자/용량 체크

### A-3. 상품 상세/수정(선택 사항이지만 실무적으로 권장)

- **Route**: `GET /admin/products/{id}`, `GET /admin/products/{id}/edit`, `POST/PUT /admin/products/{id}`
- **Template**: `admin/product-detail.html`(읽기), `admin/product-form.html`(수정겸용)
- **Content**: A-2 입력 필드 + 등록/수정 메타 정보

### A-4. 주문 목록 조회 (+정렬/페이징)

- **Route**: `GET /admin/orders`
- **Template**: `admin/order-list.html`
- **Sort**: 주문날짜, 주문자ID, 주문금액, 주문상태 (ASC/DESC)
- **Columns**: 주문번호, 주문일, 주문자, 금액, 상태, 관리(상세)

### A-5. 주문 상세보기(상태 수동 변경)

- **Route**: `GET /admin/orders/{id}`, `POST /admin/orders/{id}/status`
- **Template**: `admin/order-detail.html`
- **Content**: 주문자 정보, 배송지, 결제정보, 주문상품 목록, 합계, **상태 변경 드롭다운+저장**

### A-6. 회원 목록 조회 (+검색/정렬/페이징)

- **Route**: `GET /admin/members`
- **Template**: `admin/member-list.html`
- **Search**: 회원ID, 회원상태, 이메일, 가입일(기간), 회원등급, 회원이름
- **Sort**: 회원ID, 이름, 가입일 (ASC/DESC)
- **Columns**: 회원ID, 이름, 이메일, 연락처, 회원등급, 상태, 가입일, 관리(상세)

### A-7. 회원 상세 조회

- **Route**: `GET /admin/members/{id}`
- **Template**: `admin/member-detail.html`
- **Content**: 이름, 연락처, 이메일, 주소, 가입일, 최종접속일, 회원등급, 가입상태
- **Action**: "주문 내역 보기" 버튼 → A-4(주문 목록)로 필터링 이동

### A-8. 재고 조회(+검색/정렬/페이징)

- **Route**: `GET /admin/inventory`
- **Template**: `admin/inventory-list.html`
- **Search**: 책이름, 출판사, 저자, 등록일(기간)
- **Sort**: 상품 이름, 가격, 등록일 (ASC/DESC)
- **Columns**: 상품, ISBN, 재고수량, 안전재고, 판매상태, 최근입출고일

> Admin 필요 화면 수(권장): A-1 ~ A-8 총 8 화면 (상품 상세/수정(A-3)을 포함하면 9~10 화면)
>

---

## 2) 사용자(User) 화면

### U-1. 메인 홈

- **Route**: `GET /`
- **Template**: `product/home.html`
- **Widgets**: 중앙 상단 검색창(책이름/출판사/저자), **월간 베스트셀러**, **인기 검색어 실시간**, 우측 배너 **최근 본 책**

### U-2. 카테고리/분류별 목록(대/중/소)

- **Route**: `GET /category/{large}/{medium?}/{small?}`
- **Template**: `product/category-list.html`
- **Filters**: 카테고리, 가격범위, 출판사, 저자, 평점 등(선택)

### U-3. 검색 결과 목록

- **Route**: `GET /search?q=...`
- **Template**: `product/search-list.html`
- **Sort**: 관련도, 판매지수, 가격, 등록일

### U-4. 상품 상세

- **Route**: `GET /products/{id}`
- **Template**: `product/detail.html`
- **Content**: 이미지, 가격, 재고, 상세설명, 책 크기, 평점, 판매지수, 리뷰 리스트/작성, **장바구니 담기**, **바로구매**

### U-5. 장바구니

- **Route**: `GET /cart`
- **Template**: `user/cart.html`
- **Content**: 썸네일, 제목/저자, 단가, 수량(+-), 소계, 선택삭제(체크박스), 전체/선택 주문

### U-6. 주문 결제(외부결제 연동 진입)

- **Route**: `GET /checkout`, `POST /checkout`
- **Template**: `user/checkout.html`
- **Content**: 배송지/수령인, 결제수단 선택(카카오페이 등), 약관 동의, 결제요약 → 결제요청

### U-7. 회원가입

- **Route**: `GET /signup`, `POST /signup`
- **Template**: `auth/signup.html`
- **Fields**: id, 이름, 이메일, 연락처, 주소, 비밀번호/확인, **id중복체크** 버튼
- **Validation**: 프론트/백엔드 동시 검증(형식/중복)

### U-8. 로그인/로그아웃 & 비밀번호 재설정

- **Route**: `GET /login`, `POST /login`, `POST /logout`
- **Template**: `auth/login.html`
- **Options**: 아이디 기억(쿠키), 소셜로그인(선택)

### U-9. 비밀번호 재설정 플로우(2단계)

- **Route**: `GET /password/forgot`, `POST /password/forgot` → 이메일 발송
- **Route**: `GET /password/reset?token=...`, `POST /password/reset`
- **Template**: `auth/password-forgot.html`, `auth/password-reset.html`

### U-10. 마이페이지 – 주문 목록

- **Route**: `GET /mypage/orders`
- **Template**: `user/my-orders.html`
- **Content**: 주문번호, 주문일, 상태, 금액, 상세보기/취소 버튼

### U-11. 마이페이지 – 주문 상세

- **Route**: `GET /mypage/orders/{id}`
- **Template**: `user/my-order-detail.html`
- **Content**: 주문상품, 배송지, 결제정보, **주문취소**, 리뷰작성 진입

> User 필요 화면 수(권장): U-1 ~ U-11 총 11 화면
>

---

## 3) 오류/기타 화면

- **E-1. 404 Not Found** → `error/404.html`
- **E-2. 500 Server Error** → `error/500.html`
- **E-3. 접근권한 없음(403)** → `error/403.html`

> 기타 화면 수: 3
>

---

## 4) 전체 화면 수 요약(권장 최소치)

- **관리자**: 8~10
- **사용자**: 11
- **오류/기타**: 3
- **합계**: **22~24 화면**

---

## 5) Thymeleaf 모델 계약(예시 키)

- 목록 공통: `page`, `pageSize`, `totalPages`, `sort`, `filters`, `items`(List)
- 상품: `product`, `productForm`, `images`, `previewPdfUrl`
- 주문: `order`, `orderItems`, `payment`, `shipment`
- 회원: `member`, `memberStatus`, `memberGrade`
- 카테고리: `categories`, `breadcrumbs`
- 마이페이지: `myOrders`, `recentViewed`

---

## 6) 네이밍 규칙 & 폴더 계획

- **템플릿 파일명**: `kebab-case` (예: `product-list.html`)
- **라우트 규칙**: 자원 복수형 + RESTful (예: `/admin/products/{id}/edit`)
- **정적 리소스(후속)**
    - `static/css/…`, `static/js/…`, `static/img/…`
    - 페이지 전용 스크립트/스타일은 동일 파일명으로 1:1 매핑(예: `product-list.js`, `product-list.css`)

---

## 7) 공통 프래그먼트(후속 HTML에 사용)

- 헤더/푸터, 글로벌 내비, 서치바, 페이징, 알럿/컨펌 모달, 테이블 빈행 안내, 폼 에러 표시, 로딩 스피너

---