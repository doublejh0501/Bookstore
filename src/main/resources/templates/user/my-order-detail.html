<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="_fragments/layout :: layout(~{::section}, '주문 상세')">
<section th:fragment="content" th:object="${order}">
  <h1>주문 상세 <small th:text="*{id}"></small></h1>

  <h2>배송지</h2>
  <div th:text="${shipment?.address}">-</div>

  <h2>결제정보</h2>
  <dl>
    <dt>수단</dt><dd th:text="${payment?.method}">-</dd>
    <dt>상태</dt><dd th:text="${payment?.status}">-</dd>
    <dt>금액</dt><dd th:text="${#numbers.formatInteger(payment?.amount, 3, 'COMMA')}">0</dd>
  </dl>

  <h2>주문상품</h2>
  <ul>
    <li th:each="i : ${orderItems}">
      <a th:href="@{|/products/${i.productId}|}" th:text="${i.productName}">상품</a>
      x <span th:text="${i.quantity}">1</span>
    </li>
  </ul>

  <div>
    <form th:if="${order.cancelable}" th:action="@{|/mypage/orders/${order.id}/cancel|}" method="post">
      <input type="hidden" th:if="${_csrf != null}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
      <button type="submit">주문취소</button>
    </form>
  </div>

  <div style="margin-top:12px;">
    <a th:href="@{/mypage/orders}">목록</a>
  </div>
</section>
</html>
