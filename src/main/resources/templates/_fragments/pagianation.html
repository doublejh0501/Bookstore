<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8">
<body>
<!-- 최대한 단순화: 컨트롤러에서 page(int), size(int), totalPages(int)만 정확히 넘겨주세요. -->
<!-- 사용: th:replace="_fragments/pagination :: pager(${page}, ${pageSize}, ${totalPages})" -->
<nav th:fragment="pager(page, size, totalPages)">
  <form method="get">
    <select name="size">
      <option th:value="30" th:selected="${size == 30}">30</option>
      <option th:value="50" th:selected="${size == 50}">50</option>
      <option th:value="100" th:selected="${size == 100}">100</option>
    </select>
    <button type="submit">적용</button>
  </form>


  <ul th:if="${totalPages > 1}">
    <li>
      <a th:if="${page > 0}" th:href="@{|?page=${page-1}&size=${size}|}">이전</a>
      <span th:unless="${page > 0}">이전</span>
    </li>


    <li th:each="p : ${#numbers.sequence(0, totalPages-1)}"
        th:classappend="${p == page} ? 'active'">
      <a th:href="@{|?page=${p}&size=${size}|}" th:text="${p + 1}">1</a>
    </li>


    <li>
      <a th:if="${page < totalPages-1}" th:href="@{|?page=${page+1}&size=${size}|}">다음</a>
      <span th:unless="${page < totalPages-1}">다음</span>
    </li>
  </ul>


  <div th:if="${totalPages == 0}">표시할 데이터가 없습니다.</div>
</nav>
</body>
</html>