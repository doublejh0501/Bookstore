<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="_fragments/layout :: layout(~{::section}, '상품 목록')">
<section th:fragment="content">
  <h1>상품 목록</h1>

  <div th:replace="_fragments/search-bar :: basic(@{/admin/products}, 'q', 'saleStatus')"></div>

  <div style="margin: 8px 0">
    <a th:href="@{/admin/products/new}">상품 등록</a>
  </div>

  <table>
    <thead>
    <tr>
      <th>이미지</th>
      <th>이름</th>
      <th>저자</th>
      <th>출판사</th>
      <th>가격</th>
      <th>재고</th>
      <th>판매상태</th>
      <th>등록일</th>
      <th>관리</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="p : ${items}">
      <td><img th:src="${p.thumbnail}" alt="thumb" width="40" height="56"/></td>
      <td th:text="${p.name}">책 이름</td>
      <td th:text="${p.author}">저자</td>
      <td th:text="${p.publisher}">출판사</td>
      <td th:text="${#numbers.formatInteger(p.price, 3, 'COMMA')}">0</td>
      <td th:text="${p.stock}">0</td>
      <td th:text="${p.saleStatus}">ON_SALE</td>
      <td th:text="${#temporals.format(p.createdAt, 'yyyy-MM-dd')}">2025-01-01</td>
      <td>
        <a th:href="@{|/admin/products/${p.id}|}">상세</a>
        <a th:href="@{|/admin/products/${p.id}/edit|}">수정</a>
      </td>
    </tr>
    <tr th:if="${#lists.isEmpty(items)}"
        th:replace="_fragments/table-empty :: emptyRow(9, '상품이 없습니다.')"></tr>
    </tbody>
  </table>

  <div th:replace="_fragments/pagianation :: pager(${page}, ${pageSize}, ${totalPages})"></div>
</section>
</html>
